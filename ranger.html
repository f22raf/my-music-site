<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–∫–µ–π: –†–µ–π–Ω–¥–∂–µ—Ä –°—Ç—Ä–∞–∂</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}body{font-family:'Courier New',monospace;background:#111;color:#0f0;line-height:1.5;padding-bottom:100px}#scenes{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:20px;background:rgba(0,0,0,0.95);z-index:100}button{background:#0f0;color:#000;border:none;padding:8px 15px;font-family:'Courier New',monospace;margin:5px;cursor:pointer;border-radius:4px;font-size:14px;transition:all 0.2s}button:hover{background:#0d0;transform:scale(1.02)}button.no{background:#f44}button:disabled{opacity:0.3;cursor:not-allowed;background:#444;color:#666}#game{display:none;max-width:650px;margin:10px auto;padding:0 8px}#stats{background:#000;border:1px solid #0f0;border-radius:6px;padding:10px;margin:8px 0;text-align:center;font-size:15px}#timer{color:#ff5252;font-weight:bold;font-size:18px;margin:4px 0}#main{margin:10px 0}#jobs,#upgrades{background:#1a1a1a;border-radius:6px;padding:8px;margin:10px 0;border:1px solid #333}h3{color:#0f0;text-align:center;margin:6px 0;font-size:16px}.item{display:flex;justify-content:space-between;align-items:center;background:#222;padding:6px;margin:4px 0;border-radius:4px;font-size:13px}.hint{font-size:11px;color:#777;margin-top:2px;text-align:right}.req{font-size:10px;color:#f55;margin-top:1px}.hidden{display:none}.card{background:linear-gradient(120deg,#667eea,#764ba2);padding:12px;border-radius:10px;max-width:300px;margin:12px auto;text-align:center}.qr{width:80px;height:80px;background:#fff;margin:8px auto;border:2px solid #0f0}.event{position:fixed;top:20%;left:50%;transform:translateX(-50%);background:#ff4757;color:white;padding:15px;border-radius:10px;z-index:200;max-width:80%;text-align:center;font-weight:bold;box-shadow:0 0 20px rgba(255,0,0,0.7);animation:shake 0.5s}
        @keyframes shake{0%,100%{transform:translateX(-50%) rotate(0deg)}25%{transform:translateX(-52%) rotate(-2deg)}75%{transform:translateX(-48%) rotate(2deg)}}
        #game-over{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:20px;z-index:300;display:none}
        #game-over h2{font-size:32px;margin-bottom:20px;color:#ff4757}
        #game-over p{font-size:18px;margin:10px 0}
        #game-over button{padding:12px 30px;font-size:18px;margin:10px}
    </style>
</head>
<body>
    <div id="scenes">
        <div id="s1"><p>...–≥–æ–ª–æ–≤–∞ —Ä–∞—Å–∫–∞–ª—ã–≤–∞–µ—Ç—Å—è...</p><p>–¢—ã –ø—Ä–æ—Å—ã–ø–∞–µ—à—å—Å—è –Ω–∞ –≥—Ä—è–∑–Ω–æ–º –¥–∏–≤–∞–Ω–µ. –¢–µ–ª–µ—Ñ–æ–Ω: 14 —Ñ–µ–≤—Ä–∞–ª—è 2026.</p><p>–ß–ï–†–ï–ó 48 –ß–ê–°–û–í –ù–£–ñ–ù–û 30 000‚ÇΩ –ù–ê –ê–†–ï–ù–î–£. –í –∫–∞—Ä–º–∞–Ω–µ ‚Äî 0‚ÇΩ.</p><button onclick="show(2)">–í–°–¢–ê–¢–¨</button></div>
        <div id="s2" class="hidden"><p>–ù–∞—Ç—è–≥–∏–≤–∞–µ—à—å –≥—Ä—è–∑–Ω—ã–µ –¥–∂–∏–Ω—Å—ã. –ò–∑ –∫–∞—Ä–º–∞–Ω–∞ –≤—ã–ø–∞–¥–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∞:</p><p>"–û–ö–ï–ô: –†–ï–ô–ù–î–ñ–ï–† –°–¢–†–ê–ñ"</p><p>–ù–∞ –æ–±–æ—Ä–æ—Ç–µ ‚Äî QR-–∫–æ–¥.</p><button class="no" onclick="gameOver(false)">–ù–ï –°–ö–ê–ù–ò–†–û–í–ê–¢–¨</button><button onclick="show(3)">–°–ö–ê–ù–ò–†–û–í–ê–¢–¨</button></div>
        <div id="s3" class="hidden"><div class="card"><div>–û–ö–ï–ô</div><div>–†–ï–ô–ù–î–ñ–ï–† –°–¢–†–ê–ñ</div><div>üé∏</div></div><div class="qr"></div><p>–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–∏—Å—Ç–µ–º–µ?</p><button onclick="startGame()">–î–ê, –ù–ê–ß–ê–¢–¨</button></div>
    </div>

    <div id="game">
        <h1 style="text-align:center;font-size:20px;margin:8px 0">–û–ö–ï–ô: –†–ï–ô–ù–î–ñ–ï–† –°–¢–†–ê–ñ</h1>
        <div id="stats">
            <div>–î–ï–ù–¨–ì–ò: <span id="m">0</span>‚ÇΩ</div>
            <div id="timer">–í–†–ï–ú–Ø: 48:00:00</div>
            <div>–î–û–•–û–î: <span id="cps">0</span>‚ÇΩ/—Å–µ–∫</div>
            <div>–°–¢–ê–¢–£–°: <span id="st">–ë–û–ú–ñ</span></div>
        </div>
        
        <div id="main">
            <button id="street" disabled onclick="streetClick()">üé∏ –°–¢–†–ò–¢–û–í–ê–¢–¨ (–Ω—É–∂–Ω–∞ –≥–∏—Ç–∞—Ä–∞)</button>
            <div id="risk" style="text-align:center;font-size:12px;color:#777;margin-top:5px">‚ö†Ô∏è –†–∏—Å–∫: —á–µ–º –¥–æ–ª—å—à–µ —Å—Ç—Ä–∏—Ç—É–µ—à—å ‚Äî —Ç–µ–º –≤—ã—à–µ —à–∞–Ω—Å –ø–∏–∑–¥—é–ª–µ–π</div>
        </div>
        
        <div id="jobs">
            <h3>üíº –ü–û–î–†–ê–ë–û–¢–ö–ò</h3>
            <div class="item">
                <div>üö∂ –ü–µ—à–∫–æ–º (10 –º–∏–Ω)<div class="hint">+50‚ÇΩ</div></div>
                <button onclick="doJob('walk')">–†–ê–ë–û–¢–ê–¢–¨</button>
            </div>
            <div class="item">
                <div>üö≤ –í–µ–ª–æ—Å–∏–ø–µ–¥ (30 –º–∏–Ω)<div class="hint">–ê—Ä–µ–Ω–¥–∞: 100‚ÇΩ | +200‚ÇΩ</div><div class="req" id="bike-req">–°–Ω–∞—á–∞–ª–∞ –∞—Ä–µ–Ω–¥—É–π</div></div>
                <button id="bike-btn" onclick="doJob('bike')">–ê–†–ï–ù–î–û–í–ê–¢–¨</button>
            </div>
            <div class="item">
                <div>üõµ –°–∞–º–æ–∫–∞—Ç (30 –º–∏–Ω)<div class="hint">–ê—Ä–µ–Ω–¥–∞: 200‚ÇΩ | +400‚ÇΩ</div><div class="req" id="scooter-req">–°–Ω–∞—á–∞–ª–∞ –∞—Ä–µ–Ω–¥—É–π</div></div>
                <button id="scooter-btn" onclick="doJob('scooter')">–ê–†–ï–ù–î–û–í–ê–¢–¨</button>
            </div>
            <div class="item" id="apartment-item" style="display:none">
                <div>üè† –§—É—Ñ–ª–æ-–∫–≤–∞—Ä—Ç–∏—Ä–Ω–∏–∫ (1 —á–∞—Å)<div class="hint">–°—Ç–æ–∏–º–æ—Å—Ç—å: 200‚ÇΩ | –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –º—É–∑—ã–∫–∞–Ω—Ç–∞–º–∏</div></div>
                <button onclick="doJob('apartment')">–°–•–û–î–ò–¢–¨</button>
            </div>
        </div>
        
        <div id="upgrades">
            <h3>üõí –ü–û–ö–£–ü–ö–ò</h3>
            <div class="item">
                <div>üé∏ –§—É—Ñ–ª–æ-–≥–∏—Ç–∞—Ä–∞<div class="hint">500‚ÇΩ | –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç —Å—Ç—Ä–∏—Ç–æ–≤–∞–Ω–∏–µ</div><div class="req" id="guitar-req">–ù—É–∂–Ω–∞ –¥–ª—è —Å—Ç—Ä–∏—Ç–æ–≤</div></div>
                <button id="guitar-btn" onclick="buy('guitar')">–ö–£–ü–ò–¢–¨</button>
            </div>
            <div class="item" id="speaker-item" style="display:none">
                <div>üîä –§—É—Ñ–ª–æ-–∫–æ–ª–æ–Ω–∫–∞<div class="hint">3000‚ÇΩ | –î–ª—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞</div></div>
                <button onclick="buy('speaker')">–ö–£–ü–ò–¢–¨</button>
            </div>
            <div class="item" id="mic-item" style="display:none">
                <div>üé§ –§—É—Ñ–ª–æ-–º–∏–∫—Ä–æ—Ñ–æ–Ω<div class="hint">1000‚ÇΩ | +0.5‚ÇΩ/—Å–µ–∫ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–ª–æ–Ω–∫–∞)</div><div class="req" id="mic-req">–°–Ω–∞—á–∞–ª–∞ –∫—É–ø–∏ –∫–æ–ª–æ–Ω–∫—É</div></div>
                <button id="mic-btn" disabled onclick="buy('mic')">–ö–£–ü–ò–¢–¨</button>
            </div>
            <div class="item" id="bass-item" style="display:none">
                <div>üé∏ –§—É—Ñ–ª–æ-–±–∞—Å<div class="hint">3000‚ÇΩ | –î–ª—è –±–∞—Å–∏—Å—Ç–∞</div></div>
                <button onclick="buy('bass')">–ö–£–ü–ò–¢–¨</button>
            </div>
            <div class="item" id="drums-item" style="display:none">
                <div>ü•Å –§—É—Ñ–ª–æ-–±–∞—Ä–∞–±–∞–Ω—ã<div class="hint">5000‚ÇΩ | –î–ª—è —É–¥–∞—Ä–Ω–∏–∫–∞</div></div>
                <button onclick="buy('drums')">–ö–£–ü–ò–¢–¨</button>
            </div>
            <div class="item" id="concert-item" style="display:none">
                <div>üé™ –§—É—Ñ–ª–æ-–∫–æ–Ω—Ü–µ—Ä—Ç<div class="hint">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: 5000‚ÇΩ | –ü—Ä–∏–±—ã–ª—å: 20000‚ÇΩ</div><div class="req" id="concert-req">–ù—É–∂–Ω—ã: –≥–∏—Ç–∞—Ä–∏—Å—Ç, –±–∞—Å–∏—Å—Ç, —É–¥–∞—Ä–Ω–∏–∫</div></div>
                <button id="concert-btn" disabled onclick="buy('concert')">–û–†–ì–ê–ù–ò–ó–û–í–ê–¢–¨</button>
            </div>
        </div>
    </div>

    <div id="game-over">
        <h2 id="game-over-title">–¢–´ –ü–†–û–ò–ì–†–ê–õ</h2>
        <p id="game-over-text">–¢–µ–±—è –≤—ã–≥–Ω–∞–ª–∏ –∏–∑ –∫–≤–∞—Ä—Ç–∏—Ä—ã. –¢—ã –∂–∏–≤—ë—à—å –Ω–∞ —É–ª–∏—Ü–µ...</p>
        <button onclick="newGame()">üéÆ –ù–û–í–ê–Ø –ò–ì–†–ê</button>
        <button onclick="location.href='https://f22raf.github.io/my-music-site/'">üéµ –°–ê–ô–¢ –ì–†–£–ü–ü–´ –û–ö–ï–ô</button>
    </div>

    <script>
        let state = {
            money: 0,
            time: 172800, // 48 —á–∞—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
            cps: 0,
            clickValue: 0,
            hasGuitar: false,
            hasSpeaker: false,
            hasBike: false,
            hasScooter: false,
            metMusicians: false,
            hasBass: false,
            hasDrums: false,
            bandReady: false,
            streetClicks: 0,
            streetRisk: 0,
            micLevel: 0
        };
        
        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const el = id => document.getElementById(id);
        
        // –°—Ü–µ–Ω—ã
        function showScene(n) {
            ['s1','s2','s3'].forEach(id => el(id).classList.add('hidden'));
            el('s'+n).classList.remove('hidden');
        }
        
        // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
        function startGame() {
            el('scenes').style.display = 'none';
            el('game').style.display = 'block';
            loadGame();
            setInterval(update, 1000);
        }
        
        // –ü–æ–¥—Ä–∞–±–æ—Ç–∫–∏
        function doJob(type) {
            if (state.time <= 0) return;
            
            switch(type) {
                case 'walk':
                    if (state.time < 600) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏!');
                    state.money += 50;
                    state.time -= 600;
                    break;
                case 'bike':
                    if (!state.hasBike) {
                        if (state.money < 100) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥ –Ω–∞ –∞—Ä–µ–Ω–¥—É!');
                        state.money -= 100;
                        state.hasBike = true;
                        el('bike-btn').innerText = '–†–ê–ë–û–¢–ê–¢–¨';
                        el('bike-req').style.display = 'none';
                        return;
                    }
                    if (state.time < 1800) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏!');
                    state.money += 200;
                    state.time -= 1800;
                    break;
                case 'scooter':
                    if (!state.hasScooter) {
                        if (state.money < 200) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥ –Ω–∞ –∞—Ä–µ–Ω–¥—É!');
                        state.money -= 200;
                        state.hasScooter = true;
                        el('scooter-btn').innerText = '–†–ê–ë–û–¢–ê–¢–¨';
                        el('scooter-req').style.display = 'none';
                        return;
                    }
                    if (state.time < 1800) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏!');
                    state.money += 400;
                    state.time -= 1800;
                    break;
                case 'apartment':
                    if (state.money < 200) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥ –Ω–∞ –≤—Ö–æ–¥!');
                    if (state.time < 3600) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏!');
                    state.money -= 200;
                    state.time -= 3600;
                    state.metMusicians = true;
                    el('bass-item').style.display = 'block';
                    el('drums-item').style.display = 'block';
                    el('apartment-item').style.display = 'none';
                    alert('–ü–æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å —Ñ—É—Ñ–ª–æ-–±–∞—Å–∏—Å—Ç–æ–º –∏ —Ñ—É—Ñ–ª–æ-—É–¥–∞—Ä–Ω–∏–∫–æ–º!\n–¢–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å –Ω–∞–Ω—è—Ç—å –∏—Ö –¥–ª—è —Ñ—É—Ñ–ª–æ-–∫–æ–Ω—Ü–µ—Ä—Ç–∞.');
                    break;
            }
            saveGame();
            updateUI();
        }
        
        // –ü–æ–∫—É–ø–∫–∏
        function buy(item) {
            if (state.time <= 0) return;
            
            switch(item) {
                case 'guitar':
                    if (state.money < 500) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥!');
                    if (state.hasGuitar) return alert('–£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å —Ñ—É—Ñ–ª–æ-–≥–∏—Ç–∞—Ä–∞!');
                    state.money -= 500;
                    state.hasGuitar = true;
                    state.clickValue = 10;
                    state.streetClicks = 0;
                    state.streetRisk = 0;
                    el('street').disabled = false;
                    el('street').innerText = 'üé∏ –°–¢–†–ò–¢–û–í–ê–¢–¨ (+10‚ÇΩ)';
                    el('guitar-btn').disabled = true;
                    el('guitar-req').style.display = 'none';
                    el('apartment-item').style.display = 'block';
                    break;
                case 'speaker':
                    if (state.money < 3000) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥!');
                    state.money -= 3000;
                    state.hasSpeaker = true;
                    el('mic-btn').disabled = false;
                    el('mic-req').style.display = 'none';
                    el('speaker-item').style.display = 'none';
                    break;
                case 'mic':
                    if (!state.hasSpeaker) return alert('–°–Ω–∞—á–∞–ª–∞ –∫—É–ø–∏ –∫–æ–ª–æ–Ω–∫—É!');
                    if (state.money < 1000) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥!');
                    state.money -= 1000;
                    state.cps += 0.5;
                    state.micLevel++;
                    break;
                case 'bass':
                    if (state.money < 3000) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥!');
                    state.money -= 3000;
                    state.hasBass = true;
                    checkBandReady();
                    break;
                case 'drums':
                    if (state.money < 5000) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥!');
                    state.money -= 5000;
                    state.hasDrums = true;
                    checkBandReady();
                    break;
                case 'concert':
                    if (!state.bandReady) return alert('–°–æ–±–µ—Ä–∏ –≥—Ä—É–ø–ø—É —Å–Ω–∞—á–∞–ª–∞!');
                    if (state.money < 5000) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥ –Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é!');
                    state.money -= 5000;
                    state.money += 20000;
                    alert('–§–£–§–õ–û-–ö–û–ù–¶–ï–†–¢ –ü–†–û–®–Å–õ –£–°–ü–ï–®–ù–û!\n+20000‚ÇΩ –Ω–∞ —Å—á–µ—Ç—É!');
                    break;
            }
            saveGame();
            updateUI();
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –≥—Ä—É–ø–ø—ã
        function checkBandReady() {
            if (state.hasGuitar && state.hasBass && state.hasDrums) {
                state.bandReady = true;
                el('concert-btn').disabled = false;
                el('concert-req').style.display = 'none';
                el('concert-item').style.display = 'block';
            }
        }
        
        // –°—Ç—Ä–∏—Ç–æ–≤–∞–Ω–∏–µ —Å —Ä–∏—Å–∫–æ–º
        function streetClick() {
            if (!state.hasGuitar) return;
            
            state.money += state.clickValue;
            state.streetClicks++;
            state.streetRisk += 0.5;
            
            // –®–∞–Ω—Å –ø–∏–∑–¥—é–ª–µ–π –ø–æ—Å–ª–µ 30 –∫–ª–∏–∫–æ–≤
            if (state.streetClicks > 30 && Math.random() * 100 < state.streetRisk) {
                // –û—Ç–ø–∏–∑–¥–∏–ª–∏!
                const loss = Math.min(1000, Math.floor(state.money * 0.3));
                state.money = Math.max(0, state.money - loss);
                state.hasGuitar = false;
                state.streetClicks = 0;
                state.streetRisk = 0;
                
                // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                const event = document.createElement('div');
                event.className = 'event';
                event.innerHTML = `‚ö†Ô∏è –¢–ï–ë–Ø –û–¢–ü–ò–ó–î–ò–õ–ò –ò –û–¢–ù–Ø–õ–ò –ì–ò–¢–ê–†–£!<br>–ü–æ—Ç–µ—Ä—è–Ω–æ ${loss}‚ÇΩ!`;
                document.body.appendChild(event);
                setTimeout(() => event.remove(), 3000);
                
                // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                el('street').disabled = true;
                el('street').innerText = 'üé∏ –°–¢–†–ò–¢–û–í–ê–¢–¨ (–Ω—É–∂–Ω–∞ –≥–∏—Ç–∞—Ä–∞)';
                el('guitar-btn').disabled = false;
                el('guitar-req').style.display = 'block';
            }
            
            saveGame();
            updateUI();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            el('m').innerText = Math.floor(state.money);
            el('cps').innerText = state.cps.toFixed(1);
            
            // –¢–∞–π–º–µ—Ä
            const hours = Math.floor(state.time / 3600);
            const minutes = Math.floor((state.time % 3600) / 60);
            const seconds = state.time % 60;
            el('timer').innerText = `–í–†–ï–ú–Ø: ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // –°—Ç–∞—Ç—É—Å
            if (state.money >= 100000) state.status = '–§–£–§–õ–û-–õ–ï–ì–ï–ù–î–ê üåü';
            else if (state.money >= 50000) state.status = '–§–£–§–õ–û-–ó–í–ï–ó–î–ê üé∏';
            else if (state.money >= 10000) state.status = '–§–£–§–õ–û-–ú–£–ó–´–ö–ê–ù–¢ üé§';
            else if (state.money >= 1000) state.status = '–§–£–§–õ–û-–£–õ–ò–ß–ù–´–ô üéº';
            else state.status = '–ë–û–ú–ñ';
            el('st').innerText = state.status;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
            el('bike-btn').disabled = state.hasBike && state.time < 1800;
            el('scooter-btn').disabled = state.hasScooter && state.time < 1800;
            el('guitar-btn').disabled = state.hasGuitar || state.money < 500;
            el('mic-btn').disabled = !state.hasSpeaker || state.money < 1000;
            el('concert-btn').disabled = !state.bandReady || state.money < 5000;
        }
        
        // –ì–ª–∞–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
        function update() {
            if (state.time <= 0) {
                endGame(state.money >= 30000);
                return;
            }
            
            // –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥
            state.money += state.cps;
            state.time--;
            
            updateUI();
            saveGame();
        }
        
        // –û–∫–æ–Ω—á–∞–Ω–∏–µ –∏–≥—Ä—ã
        function endGame(isWin) {
            // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
            clearInterval(update);
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω –æ–∫–æ–Ω—á–∞–Ω–∏—è
            el('game').style.display = 'none';
            el('game-over').style.display = 'flex';
            
            if (isWin) {
                el('game-over-title').innerText = '–ü–û–ë–ï–î–ê!';
                el('game-over-title').style.color = '#0f0';
                el('game-over-text').innerText = `–¢—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª ${Math.floor(state.money)}‚ÇΩ!\n–ê—Ä–µ–Ω–¥–∞ –æ–ø–ª–∞—á–µ–Ω–∞. –¢—ã ‚Äî –§–£–§–õ–û-–†–ï–ô–ù–î–ñ–ï–†!`;
            } else {
                el('game-over-title').innerText = '–¢–´ –ü–†–û–ò–ì–†–ê–õ';
                el('game-over-title').style.color = '#ff4757';
                el('game-over-text').innerText = '–¢–µ–±—è –≤—ã–≥–Ω–∞–ª–∏ –∏–∑ –∫–≤–∞—Ä—Ç–∏—Ä—ã. –¢—ã –∂–∏–≤—ë—à—å –Ω–∞ —É–ª–∏—Ü–µ...\n–í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –Ω–µ –ø—Ä–æ—ë–∂–∏–≤–∞–π!';
            }
            
            // –û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            localStorage.removeItem('okGame');
        }
        
        // –ù–æ–≤–∞—è –∏–≥—Ä–∞
        function newGame() {
            // –°–±—Ä–æ—Å–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            state = {
                money: 0,
                time: 172800,
                cps: 0,
                clickValue: 0,
                hasGuitar: false,
                hasSpeaker: false,
                hasBike: false,
                hasScooter: false,
                metMusicians: false,
                hasBass: false,
                hasDrums: false,
                bandReady: false,
                streetClicks: 0,
                streetRisk: 0,
                micLevel: 0
            };
            
            // –°–∫—Ä—ã—Ç—å —ç–∫—Ä–∞–Ω –æ–∫–æ–Ω—á–∞–Ω–∏—è
            el('game-over').style.display = 'none';
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω—ã
            el('scenes').style.display = 'flex';
            el('game').style.display = 'none';
            showScene(1);
            
            // –û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            localStorage.removeItem('okGame');
        }
        
        // –ò–≥—Ä–æ–≤–æ–π –æ–≤–µ—Ä –∏–∑ —Å—Ü–µ–Ω—ã
        function gameOver(fromScene) {
            if (fromScene) {
                // –û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
                localStorage.removeItem('okGame');
                // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω –ø—Ä–æ–∏–≥—Ä—ã—à–∞
                el('scenes').style.display = 'none';
                el('game-over').style.display = 'flex';
                el('game-over-title').innerText = '–¢–´ –ü–†–û–ò–ì–†–ê–õ';
                el('game-over-text').innerText = '–¢–µ–±—è –≤—ã–≥–Ω–∞–ª–∏ –∏–∑ –∫–≤–∞—Ä—Ç–∏—Ä—ã. –¢—ã –∂–∏–≤—ë—à—å –Ω–∞ —É–ª–∏—Ü–µ...\n–í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ —Å–∫–∞–Ω–∏—Ä—É–π –∫–∞—Ä—Ç–æ—á–∫—É!';
            } else {
                newGame();
            }
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞
        function saveGame() {
            localStorage.setItem('okGame', JSON.stringify(state));
        }
        
        function loadGame() {
            const saved = localStorage.getItem('okGame');
            if (saved) {
                Object.assign(state, JSON.parse(saved));
                
                // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                if (state.hasGuitar) {
                    el('street').disabled = false;
                    el('street').innerText = `üé∏ –°–¢–†–ò–¢–û–í–ê–¢–¨ (+${state.clickValue}‚ÇΩ)`;
         
