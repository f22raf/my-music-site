<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–∫–µ–π: –†–µ–π–Ω–¥–∂–µ—Ä –°—Ç—Ä–∞–∂</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}body{font-family:'Courier New',monospace;background:#111;color:#0f0;line-height:1.5;padding-bottom:100px}#scenes{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:20px;background:rgba(0,0,0,0.95);z-index:100}button{background:#0f0;color:#000;border:none;padding:8px 15px;font-family:'Courier New',monospace;margin:5px;cursor:pointer;border-radius:4px;font-size:14px;transition:all 0.2s}button:hover{background:#0d0;transform:scale(1.02)}button.no{background:#f44}button:disabled{opacity:0.3;cursor:not-allowed;background:#444;color:#666}#game{display:none;max-width:650px;margin:10px auto;padding:0 8px}#stats{background:#000;border:1px solid #0f0;border-radius:6px;padding:10px;margin:8px 0;text-align:center;font-size:15px}#timer{color:#ff5252;font-weight:bold;font-size:18px;margin:4px 0}#main{margin:10px 0}#jobs,#upgrades{background:#1a1a1a;border-radius:6px;padding:8px;margin:10px 0;border:1px solid #333}h3{color:#0f0;text-align:center;margin:6px 0;font-size:16px}.item{display:flex;justify-content:space-between;align-items:center;background:#222;padding:6px;margin:4px 0;border-radius:4px;font-size:13px}.hint{font-size:11px;color:#777;margin-top:2px;text-align:right}.req{font-size:10px;color:#f55;margin-top:1px}.hidden{display:none}.card{background:linear-gradient(120deg,#667eea,#764ba2);padding:12px;border-radius:10px;max-width:300px;margin:12px auto;text-align:center}.qr{width:80px;height:80px;background:#fff;margin:8px auto;border:2px solid #0f0}.event{position:fixed;top:20%;left:50%;transform:translateX(-50%);background:#ff4757;color:white;padding:15px;border-radius:10px;z-index:200;max-width:80%;text-align:center;font-weight:bold;box-shadow:0 0 20px rgba(255,0,0,0.7);animation:shake 0.5s}
        @keyframes shake{0%,100%{transform:translateX(-50%) rotate(0deg)}25%{transform:translateX(-52%) rotate(-2deg)}75%{transform:translateX(-48%) rotate(2deg)}}
        #game-over{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:20px;z-index:300;display:none}
        #game-over h2{font-size:32px;margin-bottom:20px;color:#ff4757}
        #game-over p{font-size:18px;margin:10px 0}
        #game-over button{padding:12px 30px;font-size:18px;margin:10px}
        .goal{background:#2a1a3a;border-left:3px solid #9d4edd;padding:8px;margin:8px 0;border-radius:0 4px 4px 0;font-size:14px}
    </style>
</head>
<body>
    <div id="scenes">
        <div id="s1">
            <p>...–≥–æ–ª–æ–≤–∞ —Ä–∞—Å–∫–∞–ª—ã–≤–∞–µ—Ç—Å—è...</p>
            <p>–¢—ã –ø—Ä–æ—Å—ã–ø–∞–µ—à—å—Å—è –Ω–∞ –≥—Ä—è–∑–Ω–æ–º –¥–∏–≤–∞–Ω–µ. –¢–µ–ª–µ—Ñ–æ–Ω: 14 —Ñ–µ–≤—Ä–∞–ª—è 2026.</p>
            <p>–ß–ï–†–ï–ó 48 –ß–ê–°–û–í –ù–£–ñ–ù–û 30 000‚ÇΩ –ù–ê –ê–†–ï–ù–î–£. –í –∫–∞—Ä–º–∞–Ω–µ ‚Äî 0‚ÇΩ.</p>
            <button onclick="showScene(2)">–í–°–¢–ê–¢–¨</button>
        </div>
        <div id="s2" class="hidden">
            <p>–ù–∞—Ç—è–≥–∏–≤–∞–µ—à—å –≥—Ä—è–∑–Ω—ã–µ –¥–∂–∏–Ω—Å—ã. –ò–∑ –∫–∞—Ä–º–∞–Ω–∞ –≤—ã–ø–∞–¥–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∞:</p>
            <p>"–û–ö–ï–ô: –†–ï–ô–ù–î–ñ–ï–† –°–¢–†–ê–ñ"</p>
            <p>–ù–∞ –æ–±–æ—Ä–æ—Ç–µ ‚Äî QR-–∫–æ–¥.</p>
            <button class="no" onclick="endGame(false)">–ù–ï –°–ö–ê–ù–ò–†–û–í–ê–¢–¨</button>
            <button onclick="showScene(3)">–°–ö–ê–ù–ò–†–û–í–ê–¢–¨</button>
        </div>
        <div id="s3" class="hidden">
            <div class="card">
                <div>–û–ö–ï–ô</div>
                <div>–†–ï–ô–ù–î–ñ–ï–† –°–¢–†–ê–ñ</div>
                <div>üé∏</div>
            </div>
            <div class="qr"></div>
            <p>–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–∏—Å—Ç–µ–º–µ?</p>
            <button onclick="startGame()">–î–ê, –ù–ê–ß–ê–¢–¨</button>
        </div>
    </div>

    <div id="game">
        <h1 style="text-align:center;font-size:20px;margin:8px 0">–û–ö–ï–ô: –†–ï–ô–ù–î–ñ–ï–† –°–¢–†–ê–ñ</h1>
        <div id="stats">
            <div>–î–ï–ù–¨–ì–ò: <span id="m">0</span>‚ÇΩ</div>
            <div id="timer">–í–†–ï–ú–Ø: 48:00:00</div>
            <div>–î–û–•–û–î: <span id="cps">0</span>‚ÇΩ/—Å–µ–∫</div>
            <div>–°–¢–ê–¢–£–°: <span id="st">–ë–û–ú–ñ</span></div>
        </div>
        <div class="goal" id="goal-text">üéØ –¶–µ–ª—å: 30 000‚ÇΩ –Ω–∞ –∞—Ä–µ–Ω–¥—É</div>
        
        <div id="main">
            <button id="street" disabled onclick="streetClick()">üé∏ –°–¢–†–ò–¢–û–í–ê–¢–¨ (–Ω—É–∂–Ω–∞ –≥–∏—Ç–∞—Ä–∞)</button>
            <div id="risk" style="text-align:center;font-size:12px;color:#777;margin-top:5px">‚ö†Ô∏è –†–∏—Å–∫: —á–µ–º –¥–æ–ª—å—à–µ —Å—Ç—Ä–∏—Ç—É–µ—à—å ‚Äî —Ç–µ–º –≤—ã—à–µ —à–∞–Ω—Å –ø–∏–∑–¥—é–ª–µ–π</div>
        </div>
        
        <div id="jobs">
            <h3>üíº –ü–û–î–†–ê–ë–û–¢–ö–ò</h3>
            <div class="item">
                <div>üö∂ –ü–µ—à–∫–æ–º (10 –º–∏–Ω)<div class="hint">+50‚ÇΩ</div></div>
                <button onclick="doJob('walk')">–†–ê–ë–û–¢–ê–¢–¨</button>
            </div>
            <div class="item">
                <div>üö≤ –í–µ–ª–æ—Å–∏–ø–µ–¥ (30 –º–∏–Ω)<div class="hint">–ê—Ä–µ–Ω–¥–∞: 100‚ÇΩ | +200‚ÇΩ</div><div class="req" id="bike-req">–°–Ω–∞—á–∞–ª–∞ –∞—Ä–µ–Ω–¥—É–π</div></div>
                <button id="bike-btn" onclick="doJob('bike')">–ê–†–ï–ù–î–û–í–ê–¢–¨</button>
            </div>
            <div class="item">
                <div>üõµ –°–∞–º–æ–∫–∞—Ç (30 –º–∏–Ω)<div class="hint">–ê—Ä–µ–Ω–¥–∞: 200‚ÇΩ | +400‚ÇΩ</div><div class="req" id="scooter-req">–°–Ω–∞—á–∞–ª–∞ –∞—Ä–µ–Ω–¥—É–π</div></div>
                <button id="scooter-btn" onclick="doJob('scooter')">–ê–†–ï–ù–î–û–í–ê–¢–¨</button>
            </div>
            <div class="item" id="apartment-item" style="display:none">
                <div>üè† –§—É—Ñ–ª–æ-–∫–≤–∞—Ä—Ç–∏—Ä–Ω–∏–∫ (1 —á–∞—Å)<div class="hint">–°—Ç–æ–∏–º–æ—Å—Ç—å: 200‚ÇΩ | –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –º—É–∑—ã–∫–∞–Ω—Ç–∞–º–∏</div></div>
                <button onclick="doJob('apartment')">–°–•–û–î–ò–¢–¨</button>
            </div>
        </div>
        
        <div id="upgrades">
            <h3>üõí –ü–û–ö–£–ü–ö–ò</h3>
            <div class="item">
                <div>üé∏ –§—É—Ñ–ª–æ-–≥–∏—Ç–∞—Ä–∞<div class="hint">500‚ÇΩ | –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç —Å—Ç—Ä–∏—Ç–æ–≤–∞–Ω–∏–µ</div><div class="req" id="guitar-req">–ù—É–∂–Ω–∞ –¥–ª—è —Å—Ç—Ä–∏—Ç–æ–≤</div></div>
                <button id="guitar-btn" onclick="buy('guitar')">–ö–£–ü–ò–¢–¨</button>
            </div>
            <div class="item" id="speaker-item" style="display:none">
                <div>üîä –§—É—Ñ–ª–æ-–∫–æ–ª–æ–Ω–∫–∞<div class="hint">3000‚ÇΩ | –î–ª—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞</div></div>
                <button onclick="buy('speaker')">–ö–£–ü–ò–¢–¨</button>
            </div>
            <div class="item" id="mic-item" style="display:none">
                <div>üé§ –§—É—Ñ–ª–æ-–º–∏–∫—Ä–æ—Ñ–æ–Ω<div class="hint">1000‚ÇΩ | +0.5‚ÇΩ/—Å–µ–∫ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–ª–æ–Ω–∫–∞)</div><div class="req" id="mic-req">–°–Ω–∞—á–∞–ª–∞ –∫—É–ø–∏ –∫–æ–ª–æ–Ω–∫—É</div></div>
                <button id="mic-btn" disabled onclick="buy('mic')">–ö–£–ü–ò–¢–¨</button>
            </div>
            <div class="item" id="bass-item" style="display:none">
                <div>üé∏ –§—É—Ñ–ª–æ-–±–∞—Å<div class="hint">3000‚ÇΩ | –î–ª—è –±–∞—Å–∏—Å—Ç–∞</div></div>
                <button onclick="buy('bass')">–ö–£–ü–ò–¢–¨</button>
            </div>
            <div class="item" id="drums-item" style="display:none">
                <div>ü•Å –§—É—Ñ–ª–æ-–±–∞—Ä–∞–±–∞–Ω—ã<div class="hint">5000‚ÇΩ | –î–ª—è —É–¥–∞—Ä–Ω–∏–∫–∞</div></div>
                <button onclick="buy('drums')">–ö–£–ü–ò–¢–¨</button>
            </div>
            <div class="item" id="concert-item" style="display:none">
                <div>üé™ –§—É—Ñ–ª–æ-–∫–æ–Ω—Ü–µ—Ä—Ç<div class="hint">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: 5000‚ÇΩ | –ü—Ä–∏–±—ã–ª—å: 8000‚ÇΩ</div><div class="req" id="concert-req">–ù—É–∂–Ω—ã: –≥–∏—Ç–∞—Ä–∏—Å—Ç, –±–∞—Å–∏—Å—Ç, —É–¥–∞—Ä–Ω–∏–∫ | –í—Ä–µ–º—è: 4 —á–∞—Å–∞</div></div>
                <button id="concert-btn" disabled onclick="buy('concert')">–û–†–ì–ê–ù–ò–ó–û–í–ê–¢–¨</button>
            </div>
            <div class="item" id="pro-guitar-item" style="display:none">
                <div>üé∏ –ù–∞—Å—Ç–æ—è—â–∞—è –≥–∏—Ç–∞—Ä–∞<div class="hint">15000‚ÇΩ | +50‚ÇΩ –∑–∞ –∫–ª–∏–∫ | –ü–æ—Å–ª–µ —Ñ—É—Ñ–ª–æ-–∫–æ–Ω—Ü–µ—Ä—Ç–∞</div></div>
                <button onclick="buy('proGuitar')">–ö–£–ü–ò–¢–¨</button>
            </div>
            <div class="item" id="studio-item" style="display:none">
                <div>üéß –§—É—Ñ–ª–æ-—Å—Ç—É–¥–∏—è<div class="hint">50000‚ÇΩ | +10‚ÇΩ/—Å–µ–∫ | –ü–æ—Å–ª–µ –Ω–∞—Å—Ç–æ—è—â–µ–π –≥–∏—Ç–∞—Ä—ã</div></div>
                <button onclick="buy('studio')">–ê–†–ï–ù–î–û–í–ê–¢–¨</button>
            </div>
        </div>
    </div>

    <div id="game-over">
        <h2 id="game-over-title">–¢–´ –ü–†–û–ò–ì–†–ê–õ</h2>
        <p id="game-over-text">–¢–µ–±—è –≤—ã–≥–Ω–∞–ª–∏ –∏–∑ –∫–≤–∞—Ä—Ç–∏—Ä—ã. –¢—ã –∂–∏–≤—ë—à—å –Ω–∞ —É–ª–∏—Ü–µ...</p>
        <button onclick="newGame()">üéÆ –ù–û–í–ê–Ø –ò–ì–†–ê</button>
        <button onclick="location.href='https://f22raf.github.io/my-music-site/'">üéµ –°–ê–ô–¢ –ì–†–£–ü–ü–´ –û–ö–ï–ô</button>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        document.addEventListener('DOMContentLoaded', () => {
            let state = {
                money: 0,
                time: 172800,
                cps: 0,
                clickValue: 0,
                hasGuitar: false,
                hasSpeaker: false,
                hasBike: false,
                hasScooter: false,
                metMusicians: false,
                hasBass: false,
                hasDrums: false,
                bandReady: false,
                streetClicks: 0,
                streetRisk: 0,
                micLevel: 0,
                hasProGuitar: false,
                hasStudio: false,
                mainGoalDone: false
            };
            let gameInterval = null;
            
            const el = id => document.getElementById(id);
            
            window.showScene = function(n) {
                ['s1','s2','s3'].forEach(id => el(id).classList.add('hidden'));
                el('s'+n).classList.remove('hidden');
            };
            
            window.startGame = function() {
                el('scenes').style.display = 'none';
                el('game').style.display = 'block';
                loadGame();
                gameInterval = setInterval(update, 1000);
            };
            
            window.doJob = function(type) {
                if (state.time <= 0) return;
                switch(type) {
                    case 'walk':
                        if (state.time < 600) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏!');
                        state.money += 50;
                        state.time -= 600;
                        break;
                    case 'bike':
                        if (!state.hasBike) {
                            if (state.money < 100) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥ –Ω–∞ –∞—Ä–µ–Ω–¥—É!');
                            state.money -= 100;
                            state.hasBike = true;
                            el('bike-btn').innerText = '–†–ê–ë–û–¢–ê–¢–¨';
                            el('bike-req').style.display = 'none';
                            return;
                        }
                        if (state.time < 1800) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏!');
                        state.money += 200;
                        state.time -= 1800;
                        break;
                    case 'scooter':
                        if (!state.hasScooter) {
                            if (state.money < 200) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥ –Ω–∞ –∞—Ä–µ–Ω–¥—É!');
                            state.money -= 200;
                            state.hasScooter = true;
                            el('scooter-btn').innerText = '–†–ê–ë–û–¢–ê–¢–¨';
                            el('scooter-req').style.display = 'none';
                            return;
                        }
                        if (state.time < 1800) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏!');
                        state.money += 400;
                        state.time -= 1800;
                        break;
                    case 'apartment':
                        if (state.money < 200) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥ –Ω–∞ –≤—Ö–æ–¥!');
                        if (state.time < 3600) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏!');
                        state.money -= 200;
                        state.time -= 3600;
                        state.metMusicians = true;
                        el('bass-item').style.display = 'block';
                        el('drums-item').style.display = 'block';
                        el('apartment-item').style.display = 'none';
                        alert('–ü–æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å —Ñ—É—Ñ–ª–æ-–±–∞—Å–∏—Å—Ç–æ–º –∏ —Ñ—É—Ñ–ª–æ-—É–¥–∞—Ä–Ω–∏–∫–æ–º!\n–¢–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å –Ω–∞–Ω—è—Ç—å –∏—Ö –¥–ª—è —Ñ—É—Ñ–ª–æ-–∫–æ–Ω—Ü–µ—Ä—Ç–∞.');
                        break;
                }
                saveGame();
                updateUI();
            };
            
            window.buy = function(item) {
                if (state.time <= 0) return;
                switch(item) {
                    case 'guitar':
                        if (state.money < 500) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥!');
                        if (state.hasGuitar) return alert('–£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å —Ñ—É—Ñ–ª–æ-–≥–∏—Ç–∞—Ä–∞!');
                        state.money -= 500;
                        state.hasGuitar = true;
                        state.clickValue = 10;
                        state.streetClicks = 0;
                        state.streetRisk = 0;
                        el('street').disabled = false;
                        el('street').innerText = 'üé∏ –°–¢–†–ò–¢–û–í–ê–¢–¨ (+10‚ÇΩ)';
                        el('guitar-btn').disabled = true;
                        el('guitar-req').style.display = 'none';
                        el('apartment-item').style.display = 'block';
                        break;
                    case 'speaker':
                        if (state.money < 3000) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥!');
                        state.money -= 3000;
                        state.hasSpeaker = true;
                        el('mic-btn').disabled = false;
                        el('mic-req').style.display = 'none';
                        el('speaker-item').style.display = 'none';
                        break;
                    case 'mic':
                        if (!state.hasSpeaker) return alert('–°–Ω–∞—á–∞–ª–∞ –∫—É–ø–∏ –∫–æ–ª–æ–Ω–∫—É!');
                        if (state.money < 1000) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥!');
                        state.money -= 1000;
                        state.cps += 0.5;
                        state.micLevel++;
                        break;
                    case 'bass':
                        if (state.money < 3000) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥!');
                        state.money -= 3000;
                        state.hasBass = true;
                        checkBandReady();
                        break;
                    case 'drums':
                        if (state.money < 5000) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥!');
                        state.money -= 5000;
                        state.hasDrums = true;
                        checkBandReady();
                        break;
                    case 'concert':
                        if (!state.bandReady) return alert('–°–æ–±–µ—Ä–∏ –≥—Ä—É–ø–ø—É —Å–Ω–∞—á–∞–ª–∞!');
                        if (state.money < 5000) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥ –Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é!');
                        if (state.time < 14400) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏! –§—É—Ñ–ª–æ-–∫–æ–Ω—Ü–µ—Ä—Ç –∑–∞–Ω–∏–º–∞–µ—Ç 4 —á–∞—Å–∞.');
                        state.money -= 5000;
                        state.time -= 14400;
                        state.money += 8000;
                        alert('–§–£–§–õ–û-–ö–û–ù–¶–ï–†–¢ –ü–†–û–®–Å–õ!\n+8000‚ÇΩ –Ω–∞ —Å—á–µ—Ç—É!\n–ó–∞—Ç—Ä–∞—á–µ–Ω–æ 4 —á–∞—Å–∞.');
                        if (!state.hasProGuitar) el('pro-guitar-item').style.display = 'block';
                        break;
                    case 'proGuitar':
                        if (state.money < 15000) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥!');
                        state.money -= 15000;
                        state.clickValue += 50;
                        state.hasProGuitar = true;
                        el('pro-guitar-item').style.display = 'none';
                        el('studio-item').style.display = 'block';
                        alert('–ö—É–ø–∏–ª –Ω–∞—Å—Ç–æ—è—â—É—é –≥–∏—Ç–∞—Ä—É! –¢–µ–ø–µ—Ä—å –∫–ª–∏–∫–∏ –ø—Ä–∏–Ω–æ—Å—è—Ç +50‚ÇΩ');
                        break;
                    case 'studio':
                        if (state.money < 50000) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥!');
                        state.money -= 50000;
                        state.cps += 10;
                        state.hasStudio = true;
                        el('studio-item').style.display = 'none';
                        alert('–ê—Ä–µ–Ω–¥–æ–≤–∞–ª —Ñ—É—Ñ–ª–æ-—Å—Ç—É–¥–∏—é! –¢–µ–ø–µ—Ä—å +10‚ÇΩ/—Å–µ–∫ –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞');
                        break;
                }
                saveGame();
                updateUI();
            };
            
            window.streetClick = function() {
                if (!state.hasGuitar) return;
                state.money += state.clickValue;
                state.streetClicks++;
                state.streetRisk += 0.5;
                if (state.streetClicks > 30 && Math.random() * 100 < state.streetRisk) {
                    const loss = Math.min(1000, Math.floor(state.money * 0.3));
                    state.money = Math.max(0, state.money - loss);
                    state.hasGuitar = false;
                    state.streetClicks = 0;
                    state.streetRisk = 0;
                    const event = document.createElement('div');
                    event.className = 'event';
                    event.innerHTML = `‚ö†Ô∏è –¢–ï–ë–Ø –û–¢–ü–ò–ó–î–ò–õ–ò –ò –û–¢–ù–Ø–õ–ò –ì–ò–¢–ê–†–£!<br>–ü–æ—Ç–µ—Ä—è–Ω–æ ${loss}‚ÇΩ!`;
                    document.body.appendChild(event);
                    setTimeout(() => event.remove(), 3000);
                    el('street').disabled = true;
                    el('street').innerText = 'üé∏ –°–¢–†–ò–¢–û–í–ê–¢–¨ (–Ω—É–∂–Ω–∞ –≥–∏—Ç–∞—Ä–∞)';
                    el('guitar-btn').disabled = false;
                    el('guitar-req').style.display = 'block';
                }
                saveGame();
                updateUI();
            };
            
            window.endGame = function(isWin) {
                if (gameInterval) clearInterval(gameInterval);
                el('game').style.display = 'none';
                el('scenes').style.display = 'none';
                el('game-over').style.display = 'flex';
                if (isWin) {
                    el('game-over-title').innerText = '–ü–û–ë–ï–î–ê!';
                    el('game-over-title').style.color = '#0f0';
                    if (state.money >= 500000) {
                        el('game-over-text').innerText = `–¢–´ –õ–ï–ì–ï–ù–î–ê!\n–ó–∞—Ä–∞–±–æ—Ç–∞–ª ${Math.floor(state.money)}‚ÇΩ!\n–¢—É—Ä –ø–æ –†–æ—Å—Å–∏–∏ –∂–¥—ë—Ç —Ç–µ–±—è!\n\n–ì—Ä—É–ø–ø–∞ –û–ö–ï–ô –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç —Ç–µ–±—è –≤ —Å–æ—Å—Ç–∞–≤!`;
                    } else if (state.money >= 100000) {
                        el('game-over-text').innerText = `–£–°–ü–ï–•!\n–ó–∞—Ä–∞–±–æ—Ç–∞–ª ${Math.floor(state.money)}‚ÇΩ!\n–ê—Ä–µ–Ω–¥–æ–≤–∞–ª —Å—Ç—É–¥–∏—é –∏ –∑–∞–ø–∏—Å–∞–ª —Ö–∏—Ç!\n\n–ì—Ä—É–ø–ø–∞ –û–ö–ï–ô –∑–∞–º–µ—á–∞–µ—Ç —Ç–µ–±—è!`;
                    } else {
                        el('game-over-text').innerText = `–ü–û–ë–ï–î–ê!\n–ó–∞—Ä–∞–±–æ—Ç–∞–ª ${Math.floor(state.money)}‚ÇΩ!\n–ê—Ä–µ–Ω–¥–∞ –æ–ø–ª–∞—á–µ–Ω–∞. –¢—ã ‚Äî –§–£–§–õ–û-–†–ï–ô–ù–î–ñ–ï–†!`;
                    }
                } else {
                    el('game-over-title').innerText = '–¢–´ –ü–†–û–ò–ì–†–ê–õ';
                    el('game-over-title').style.color = '#ff4757';
                    if (state.time > 0) {
                        el('game-over-text').innerText = '–¢–µ–±—è –≤—ã–≥–Ω–∞–ª–∏ –∏–∑ –∫–≤–∞—Ä—Ç–∏—Ä—ã. –¢—ã –∂–∏–≤—ë—à—å –Ω–∞ —É–ª–∏—Ü–µ...\n–í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –Ω–µ –ø—Ä–æ—ë–∂–∏–≤–∞–π!';
                    } else {
                        el('game-over-text').innerText = '–í—Ä–µ–º—è –≤—ã—à–ª–æ! –¢–µ–±—è –≤—ã–≥–Ω–∞–ª–∏ –∏–∑ –∫–≤–∞—Ä—Ç–∏—Ä—ã...\n–ù—É–∂–Ω–æ –±—ã–ª–æ –±—ã—Å—Ç—Ä–µ–µ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å!';
                    }
                }
                localStorage.removeItem('okGame');
            };
            
            window.newGame = function() {
                if (gameInterval) clearInterval(gameInterval);
                state = {
                    money: 0,
                    time: 172800,
                    cps: 0,
                    clickValue: 0,
                    hasGuitar: false,
                    hasSpeaker: false,
                    hasBike: false,
                    hasScooter: false,
                    metMusicians: false,
                    hasBass: false,
                    hasDrums: false,
                    bandReady: false,
                    streetClicks: 0,
                    streetRisk: 0,
                    micLevel: 0,
                    hasProGuitar: false,
                    hasStudio: false,
                    mainGoalDone: false
                };
                el('game-over').style.display = 'none';
                el('scenes').style.display = 'flex';
                el('game').style.display = 'none';
                window.showScene(1);
                localStorage.removeItem('okGame');
            };
            
            function checkBandReady() {
                if (state.hasGuitar && state.hasBass && state.hasDrums) {
                    state.bandReady = true;
                    el('concert-btn').disabled = false;
                    el('concert-req').style.display = 'none';
                    el('concert-item').style.display = 'block';
                }
            }
            
            function updateUI() {
                el('m').innerText = Math.floor(state.money);
                el('cps').innerText = state.cps.toFixed(1);
                const h = Math.floor(state.time / 3600);
                const m = Math.floor((state.time % 3600) / 60);
                const s = state.time % 60;
                el('timer').innerText = `–í–†–ï–ú–Ø: ${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
                
                if (state.money >= 30000 && !state.mainGoalDone) {
                    state.mainGoalDone = true;
                    el('goal-text').innerHTML = '‚úÖ –ê—Ä–µ–Ω–¥–∞ –æ–ø–ª–∞—á–µ–Ω–∞!<br>üéØ –ù–æ–≤–∞—è —Ü–µ–ª—å: 100 000‚ÇΩ - –Ω–∞—Å—Ç–æ—è—â–∞—è —Å—Ç—É–¥–∏—è!';
                    el('goal-text').style.borderColor = '#0f0';
                } else if (state.money >= 100000) {
                    el('goal-text').innerHTML = '‚úÖ –°—Ç—É–¥–∏—è –∞—Ä–µ–Ω–¥–æ–≤–∞–Ω–∞!<br>üéØ –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è —Ü–µ–ª—å: 500 000‚ÇΩ - —Ç—É—Ä –ø–æ –†–æ—Å—Å–∏–∏!';
                    el('goal-text').style.borderColor = '#ff4757';
                }
                
                if (state.money >= 500000) state.status = '–õ–ï–ì–ï–ù–î–ê üåü';
                else if (state.money >= 100000) state.status = '–ó–í–ï–ó–î–ê –°–¢–£–î–ò–ò üé∏';
                else if (state.money >= 50000) state.status = '–ü–†–û–§–ï–°–°–ò–û–ù–ê–õ üé§';
                else if (state.money >= 10000) state.status = '–ú–£–ó–´–ö–ê–ù–¢ üéº';
                else if (state.money >= 1000) state.status = '–£–õ–ò–ß–ù–´–ô üéß';
                else state.status = '–ë–û–ú–ñ';
                el('st').innerText = state.status;
                
                el('bike-btn').disabled = state.hasBike && state.time < 1800;
                el('scooter-btn').disabled = state.hasScooter && state.time < 1800;
                el('guitar-btn').disabled = state.hasGuitar || state.money < 500;
                el('mic-btn').disabled = !state.hasSpeaker || state.money < 1000;
                el('concert-btn').disabled = !state.bandReady || state.money < 5000 || state.time < 14400;
            }
            
            function update() {
                if (state.time <= 0) {
                    clearInterval(gameInterval);
                    window.endGame(state.money >= 30000);
                    return;
                }
                state.money += state.cps;
                state.time--;
                updateUI();
                saveGame();
            }
            
            function saveGame() {
                localStorage.setItem('okGame', JSON.stringify(state));
            }
            
            function loadGame() {
                const saved = localStorage.getItem('okGame');
                if (saved) {
                    Object.assign(state, JSON.parse(saved));
                    if (state.hasGuitar) {
                        el('street').disabled = false;
                        el('street').innerText = `üé∏ –°–¢–†–ò–¢–û–í–ê–¢–¨ (+${state.clickValue}‚ÇΩ)`;
                        el('guitar-btn').disabled = true;
                        el('guitar-req').style.display = 'none';
                        el('apartment-item').style.display = 'block';
                    }
                    if (state.hasSpeaker) {
                        el('mic-btn').disabled = false;
                        el('mic-req').style.display = 'none';
                    }
                    if (state.hasBike) {
                        el('bike-btn').innerText = '–†–ê–ë–û–¢–ê–¢–¨';
                        el('bike-req').style.display = 'none';
                    }
                    if (state.hasScooter) {
                        el('scooter-btn').innerText = '–†–ê–ë–û–¢–ê–¢–¨';
                        el('scooter-req').style.display = 'none';
                    }
                    if (state.metMusicians) {
                        el('bass-item').style.display = 'block';
                        el('drums-item').style.display = 'block';
                        el('apartment-item').style.display = 'none';
                    }
                    if (state.hasBass && state.hasDrums) {
                        checkBandReady();
                    }
                    if (state.hasProGuitar) {
                        el('pro-guitar-item').style.display = 'none';
                        el('studio-item').style.display = 'block';
                    }
                    if (state.hasStudio) {
                        el('studio-item').style.display = 'none';
                    }
                    if (state.mainGoalDone && state.money >= 30000) {
                        el('goal-text').innerHTML = '‚úÖ –ê—Ä–µ–Ω–¥–∞ –æ–ø–ª–∞—á–µ–Ω–∞!<br>üéØ –ù–æ–≤–∞—è —Ü–µ–ª—å: 100 000‚ÇΩ - –Ω–∞—Å—Ç–æ—è—â–∞—è —Å—Ç—É–¥–∏—è!';
                        el('goal-text').style.borderColor = '#0f0';
                    }
                }
                updateUI();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ü–µ–Ω—ã
            window.showScene(1);
        });
    </script>
</body>
</html>


