<!-- music.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Музыка • Окей</title>
  <link href="https://fonts.googleapis.com/css2?family=Nosifer&display=swap" rel="stylesheet">
  <style>
    body {
      background: #0a0a0a url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><rect width="200" height="200" fill="%230f0f0f"/><path d="M0,0 L200,200 M200,0 L0,200" stroke="%231a1a1a" stroke-width="1"/></svg>');
      color: #fff;
      font-family: 'Nosifer', cursive;
      padding: 20px;
      text-align: center;
      background-size: 300px;
      background-blend-mode: overlay;
    }

    h1 {
      color: #ffcc00;
      text-shadow: 0 0 10px rgba(255,204,0,0.6);
      margin-bottom: 30px;
      font-size: 2.4em;
    }

    .record {
      display: inline-block;
      margin: 20px 10px;
      position: relative;
      cursor: pointer;
    }

    .disc {
      width: 160px;
      height: 160px;
      border-radius: 50%;
      background: #111;
      border: 8px solid #333;
      box-shadow: 0 0 15px rgba(0,0,0,0.7);
      position: relative;
      overflow: hidden;
    }

    .disc img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 50%;
      opacity: 0.92;
    }

    /* Ось CD */
    .disc::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 24px;
      height: 24px;
      background: #000;
      border: 2px solid #444;
      border-radius: 50%;
      transform: translate(-50%, -50%);
      z-index: 3;
    }

    /* Быстрое вращение как у CD */
    .disc.playing {
      animation: spinFast 0.8s linear infinite;
    }

    @keyframes spinFast {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .label {
      position: absolute;
      bottom: -28px;
      left: 50%;
      transform: translateX(-50%);
      color: #ffcc00;
      font-size: 1.1em;
      text-shadow: 0 0 5px rgba(0,0,0,0.8);
      white-space: nowrap;
    }

    .player {
      margin-top: 15px;
      opacity: 0;
      height: 0;
      overflow: hidden;
      transition: opacity 0.3s, height 0.3s;
    }

    .player.active {
      opacity: 1;
      height: auto;
    }

    .player audio {
      width: 90%;
      max-width: 300px;
      border-radius: 4px;
      background: #222;
      outline: none;
    }

    .back-link {
      display: inline-block;
      margin-top: 30px;
      color: #ffcc00;
      text-decoration: underline;
      font-size: 1.2em;
    }
  </style>
</head>
<body>

  <h1>Golden Music Records</h1>

  <div class="record" onclick="playTrack(this, 'Jurassic.mp3', 'player1')">
    <div class="disc" id="disc1">
      <img src="IMG_20250924_044956_384.jpg" alt="Юрский Движ">
    </div>
    <div class="label">Юрский Движ</div>
  </div>
  <div class="player" id="player1"></div>

  <div class="record" onclick="playTrack(this, 'Korps.mp3', 'player2')">
    <div class="disc" id="disc2">
      <img src="1758774744594.jpg" alt="Корпус Смерти Крига">
    </div>
    <div class="label">Корпус Смерти Крига</div>
  </div>
  <div class="player" id="player2"></div>

  <div class="record" onclick="playTrack(this, 'Emerald.mp3', 'player3')">
    <div class="disc" id="disc3">
      <img src="InShot_20250603_044632328.jpg" alt="Изумрудный Город">
    </div>
    <div class="label">Изумрудный Город</div>
  </div>
  <div class="player" id="player3"></div>

  <div class="record" onclick="playTrack(this, 'Ranger.mp3', 'player4')">
    <div class="disc" id="disc4">
      <img src="1758782710052.jpg" alt="Рейнджер Страж">
    </div>
    <div class="label">Рейнджер Страж</div>
  </div>
  <div class="player" id="player4"></div>

  <a href="index.html" class="back-link">← На главную</a>

  <script>
    let currentAudio = null;
    let currentDisc = null;

    function playTrack(recordEl, audioFile, playerId) {
      const disc = recordEl.querySelector('.disc');
      const player = document.getElementById(playerId);

      // Остановить предыдущий трек и диск
      if (currentAudio) {
        currentAudio.pause();
        currentAudio = null;
      }
      if (currentDisc) {
        currentDisc.classList.remove('playing');
      }

      // Очистить все плееры
      document.querySelectorAll('.player').forEach(p => {
        p.classList.remove('active');
        p.innerHTML = '';
      });

      // Запустить вращение диска СРАЗУ
      disc.classList.add('playing');
      currentDisc = disc;

      // Создать и включить аудио
      const audio = document.createElement('audio');
      audio.controls = true;
      audio.src = audioFile;
      audio.volume = 0.9;
      player.appendChild(audio);
      player.classList.add('active');

      // Воспроизвести (если можно)
      audio.play().catch(e => {
        // Если блокировка — просто показываем плеер
      });

      currentAudio = audio;

      // Остановить диск, когда трек закончится
      audio.onended = () => {
        disc.classList.remove('playing');
        currentDisc = null;
        currentAudio = null;
      };
    }
  </script>
</body>
</html>
